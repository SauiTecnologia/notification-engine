# ============================================
# APPLICATION PROPERTIES - BASE
# ============================================
# This file contains base configuration.
# Use application-dev.properties or application-prod.properties for environment-specific configs.

# Quarkus Application
quarkus.application.name=${APP_NAME:notification-engine}
quarkus.application.version=${APP_VERSION:1.0.0-SNAPSHOT}

# Profile (overridden by QUARKUS_PROFILE env var)
quarkus.profile=${QUARKUS_PROFILE:dev}

# Server Configuration
quarkus.http.port=${HTTP_PORT:8082}
quarkus.http.host=${HTTP_HOST:0.0.0.0}

# CORS Configuration
quarkus.http.cors=${CORS_ENABLED:true}
quarkus.http.cors.origins=${CORS_ORIGINS:http://localhost:3000}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=Content-Type,Authorization,X-Requested-With,Accept

# HTTP Timeouts
quarkus.http.idle-timeout=30s
quarkus.http.read-timeout=30s
quarkus.http.body.uploads.limit=10M

# Database Configuration (overridden in profile-specific files)
quarkus.datasource.db-kind=${DB_KIND:postgresql}
quarkus.datasource.jdbc.url=${DB_JDBC_URL:jdbc:postgresql://localhost:5432/postgres}
quarkus.datasource.username=${DB_USERNAME:sa}
quarkus.datasource.password=${DB_PASSWORD:}

# Hibernate
quarkus.hibernate-orm.database.generation=${DB_GENERATION:update}
quarkus.hibernate-orm.packages=com.apporte.core.model

# OIDC/Keycloak Configuration
quarkus.oidc.enabled=${OIDC_ENABLED:false}
quarkus.oidc.auth-server-url=${OIDC_AUTH_SERVER_URL:https://auth.apporte.work/realms/development}
quarkus.oidc.client-id=${OIDC_CLIENT_ID:notification-engine-dev}
quarkus.oidc.credentials.secret=${OIDC_CLIENT_SECRET:}
quarkus.oidc.token.issuer=${OIDC_ISSUER:https://auth.apporte.work/realms/development}
quarkus.oidc.roles.source=accesstoken
quarkus.oidc.roles.role-claim-path=realm_access/roles

# Security - Disable embedded users when OIDC is enabled
quarkus.security.users.embedded.enabled=false

# Jackson Configuration
quarkus.jackson.serialization-inclusion=NON_NULL
quarkus.jackson.write-dates-as-timestamps=false
quarkus.jackson.fail-on-unknown-properties=false

# Health Checks
quarkus.health.enabled=true
quarkus.smallrye-health.root-path=/q/health

# OpenAPI/Swagger
quarkus.swagger-ui.always-include=${SWAGGER_ENABLED:true}
quarkus.swagger-ui.path=/swagger-ui
quarkus.smallrye-openapi.path=/openapi

# Metrics
quarkus.micrometer.enabled=${METRICS_ENABLED:false}

# Email Configuration
quarkus.mailer.from=${EMAIL_FROM:noreply@apporte.com}
quarkus.mailer.mock=${EMAIL_MOCK:true}
quarkus.mailer.host=${SMTP_HOST:}
quarkus.mailer.port=${SMTP_PORT:587}
quarkus.mailer.username=${SMTP_USERNAME:}
quarkus.mailer.password=${SMTP_PASSWORD:}
quarkus.mailer.start-tls=${SMTP_START_TLS:REQUIRED}
quarkus.mailer.auth=${SMTP_AUTH:REQUIRED}

# Logging
quarkus.log.level=${LOG_LEVEL:INFO}
quarkus.log.console.json=${LOG_JSON:false}
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{1.}] %s%e%n
quarkus.log.category."com.apporte".level=${APP_LOG_LEVEL:INFO}
quarkus.log.category."org.hibernate".level=${HIBERNATE_LOG_LEVEL:WARN}
